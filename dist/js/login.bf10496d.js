"use strict";(self["webpackChunkjingdong"]=self["webpackChunkjingdong"]||[]).push([[966],{9396:function(e,s,a){a.d(s,{A:function(){return d},g:function(){return u}});var n=a(641),o=a(33);const r={class:"toast"};function t(e,s,a,t,c,i){return(0,n.uX)(),(0,n.CE)("div",r,(0,o.v_)(a.message),1)}var c=a(953),i={name:"ToastView",props:["message"]};const u=()=>{const e=(0,c.Kh)({showToast:!1,message:""}),s=s=>{e.showToast=!0,e.message=s,setTimeout((()=>{e.showToast=!1,e.message=""}),2e3)},{showToast:a,message:n}=(0,c.QW)(e);return{showToast:a,message:n,changeToast:s}};var p=a(6262);const l=(0,p.A)(i,[["render",t],["__scopeId","data-v-25cc2708"]]);var d=l},424:function(e,s,a){a.r(s),a.d(s,{default:function(){return f}});var n=a(641),o=a(3751);const r=e=>((0,n.Qi)("data-v-72168e2f"),e=e(),(0,n.jt)(),e),t={class:"wrapper"},c=r((()=>(0,n.Lk)("img",{class:"wrapper__img",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRwcNbxorrcMmOE1CtIJVGkpx0Vd_6f_rPKapY6P6MdfE4jy-zlW_9AE2rfBBBKeK7xaVo&usqp=CAU"},null,-1))),i={class:"wrapper__input"},u={class:"wrapper__input"};function p(e,s,a,r,p,l){const d=(0,n.g2)("ToastView");return(0,n.uX)(),(0,n.CE)("div",t,[c,(0,n.Lk)("div",i,[(0,n.bo)((0,n.Lk)("input",{class:"wrapper__input__content",placeholder:"请输入用户名","onUpdate:modelValue":s[0]||(s[0]=e=>r.userName=e)},null,512),[[o.Jo,r.userName]])]),(0,n.Lk)("div",u,[(0,n.bo)((0,n.Lk)("input",{class:"wrapper__input__content",placeholder:"请输入密码",type:"password","onUpdate:modelValue":s[1]||(s[1]=e=>r.password=e)},null,512),[[o.Jo,r.password]])]),(0,n.Lk)("div",{class:"wrapper__login-button",onClick:s[2]||(s[2]=(...e)=>r.handleLogin&&r.handleLogin(...e))},"登录"),(0,n.Lk)("div",{class:"wrapper__login-link",onClick:s[3]||(s[3]=(...e)=>r.handleRegisterClick&&r.handleRegisterClick(...e))},"立即注册"),r.showToast?((0,n.uX)(),(0,n.Wv)(d,{key:0,message:r.message},null,8,["message"])):(0,n.Q3)("",!0)])}a(4114);var l=a(953),d=a(5220),g=a(1663),m=a(9396);const w=e=>{const s=(0,l.Kh)({userName:"",password:""}),a=(0,d.rd)(),n=async()=>{const{userName:n,password:o}=(0,l.QW)(s);if(""!==n.value&&""!==o.value)try{const n=await(0,g.b)("/api/user/Login",{userName:s.userName,password:s.password});"12345"===n?.data?.userId?(localStorage.isLogin=!0,a.push({name:"Home"})):e("登陆失败")}catch(r){e("请求失败")}else e("用户名或密码不能为空")},{userName:o,password:r}=(0,l.QW)(s);return{userName:o,password:r,handleLogin:n}},h=()=>{const e=(0,d.rd)(),s=()=>{e.push({name:"Register"})};return{handleRegisterClick:s}};var _={name:"LoginPage",components:{ToastView:m.A},setup(){const{showToast:e,message:s,changeToast:a}=(0,m.g)(),{userName:n,password:o,handleLogin:r}=w(a),{handleRegisterClick:t}=h();return{handleLogin:r,handleRegisterClick:t,userName:n,password:o,showToast:e,message:s,changeToast:a}}},k=a(6262);const v=(0,k.A)(_,[["render",p],["__scopeId","data-v-72168e2f"]]);var f=v}}]);
//# sourceMappingURL=login.bf10496d.js.map